services:
  code-server:
    image: lscr.io/linuxserver/code-server:latest
    container_name: code-server
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - PROXY_DOMAIN=code.mvr.io
      - DEFAULT_WORKSPACE=/Development #optional
      - PWA_APPNAME=code-server #optional
    volumes:
      - /opt/apps/code-server:/config
      - /home/mvr/Development:/Development
      - /home/mvr/.ssh:/home/abc/.ssh:ro
    networks:
      - mvr-hl
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.code-server.entrypoints=web"
      - "traefik.http.routers.code-server.rule=Host(`code.mvr.io`)"
      - "traefik.http.services.code-server.loadbalancer.server.port=8443"
    restart: unless-stopped

networks:
  mvr-hl:
    external: true
